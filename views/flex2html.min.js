function flex2html(e, t) {
    let r, i = "";
    return r = void 0 === t.direction ? carousel_struc() : "date" === t.direction ? carousel_struc_date() : carousel_struc_text(), "flex" === t.type && ("bubble" === (t = t.contents).type ? (i = bubble_object(t), r = r.replace("\x3c!-- inner --\x3e", i)) : "carousel" === t.type && t.contents.forEach((e, t) => {
        let i = bubble_object(e);
        i = (i = i.replace("\x3c!-- content --\x3e", "")).replace("\x3c!-- inner --\x3e", ""), r = r.replace("\x3c!-- inner --\x3e", i + "\x3c!-- inner --\x3e")
    })), document.getElementById(e).innerHTML += r, r
}

function flex2html_right(e, t) {
    let r = carousel_struc(),
        i = "";
    return "flex" === t.type && ("bubble" === (t = t.contents).type ? (i = bubble_object(t), r = r.replace("\x3c!-- inner --\x3e", i)) : "carousel" === t.type && t.contents.forEach((e, t) => {
        let i = bubble_object(e);
        i = (i = i.replace("\x3c!-- content --\x3e", "")).replace("\x3c!-- inner --\x3e", ""), r = r.replace("\x3c!-- inner --\x3e", i + "\x3c!-- inner --\x3e")
    })), document.getElementById(e).innerHTML += r, r
}

function bubble_object(e) {
    let t, { hero: r, header: i, body: x, footer: n } = e,
        a = hero_struc(),
        l = header_struc(),
        o = body_struc(e),
        d = footer_struc(e);
    t = void 0 === e.custom ? bubble_struc(e) : "date" === e.custom ? bubble_struc_date(e) : bubble_struc_text(e);
    let c = "";
    for (let e in r)
        if (r.hasOwnProperty(e))
            if ("type" === e && "box" === r[e]) { c = box_recursive(c = box_object(r), r.contents) } else c = convert_object(r);
    a = a.replace("\x3c!-- inner --\x3e", c), c = "";
    for (let e in i)
        if (i.hasOwnProperty(e) && "type" === e && "box" === i[e]) { c = box_recursive(c = box_object(i), i.contents) }
    l = l.replace("\x3c!-- inner --\x3e", c), c = "";
    for (let e in x)
        if (x.hasOwnProperty(e) && "type" === e && "box" === x[e]) { c = box_recursive(c = box_object(x), x.contents) }
    o = o.replace("\x3c!-- inner --\x3e", c), c = "";
    for (let e in n)
        if (n.hasOwnProperty(e) && "type" === e && "box" === n[e]) { c = box_recursive(c = box_object(n), n.contents) }
    return d = d.replace("\x3c!-- inner --\x3e", c), t = (t = (t = (t = t.replace("\x3c!-- hero --\x3e", a)).replace("\x3c!-- header --\x3e", l)).replace("\x3c!-- body --\x3e", o)).replace("\x3c!-- footer --\x3e", d)
}

function box_recursive(e, t) {
    let r = [];
    return t.forEach((e, t) => {
        let i;
        if ("box" === e.type) { i = box_recursive(box_object(e), e.contents) } else if ("text" === e.type && e.contents && e.contents.length > 0) { i = box_recursive(convert_object(e), e.contents) } else i = convert_object(e);
        r[t] = i
    }), t.forEach((t, i) => { r[i] = r[i].replace("\x3c!-- content --\x3e", ""), e = e.replace("\x3c!-- content --\x3e", r[i] + "\x3c!-- content --\x3e") }), e
}

function convert_object(e) {
    switch (e.type) {
        case "image":
            object = image_object(e);
            break;
        case "icon":
            object = icon_object(e);
            break;
        case "text":
            object = text_object(e);
            break;
        case "span":
            object = span_object(e);
            break;
        case "button":
            object = button_object(e);
            break;
        case "filler":
            object = filler_object(e);
            break;
        case "spacer":
            object = spacer_object(e);
            break;
        case "separator":
            object = separator_object(e);
            break;
        default:
            object = null
    }
    return object
}

function box_object(e) {
    let t = "",
        { layout: r, position: i, flex: x, spacing: n, margin: a, width: l, height: o, backgroundColor: d, borderColor: c, borderWidth: s, cornerRadius: p, justifyContent: $, alignItems: b, offsetTop: f, offsetBottom: u, offsetStart: g, offsetEnd: E, paddingAll: m, paddingTop: y, paddingBottom: v, paddingStart: _, paddingEnd: h, background: B } = e;
    if ("baseline" === r ? (layout1 = "hr", layout2 = "bl") : "horizontal" === r ? (layout1 = "hr", layout2 = "") : "vertical" === r && (layout1 = "vr", layout2 = ""), fl = "", x > 3 ? t += `-webkit-box-flex:${x};flex-grow:${x};` : fl = x >= 0 ? `fl${x}` : "", exabs = "absolute" === i ? "ExAbs" : "", n && n.indexOf("px") >= 0 ? spc = "" : spc = n ? "spc" + upperalldigit(n) : "", a && a.indexOf("px") >= 0 ? (t += `margin-top:${a};`, exmgn = "") : exmgn = a ? "ExMgnT" + upperalldigit(a) : "", l && "" !== l && (t += `width:${l};`), o && "" !== o && (t += `height:${o};`), d && (t += `background-color:${d} !important;`), c && (t += `border-color:${c} !important;`), s && s.indexOf("px") >= 0) t += `border-width:${s};`, ExBdr = "";
    else switch (s) {
        case "none":
            ExBdr = "ExBdrWdtNone";
            break;
        case "light":
            ExBdr = "ExBdrWdtLgh";
            break;
        case "normal":
            ExBdr = "ExBdrWdtNml";
            break;
        case "medium":
            ExBdr = "ExBdrWdtMdm";
            break;
        case "semi-bold":
            ExBdr = "ExBdrWdtSbd";
            break;
        case "bold":
            ExBdr = "ExBdrWdtBld";
            break;
        default:
            ExBdr = ""
    }
    if (p && p.indexOf("px") >= 0 ? (t += `border-radius:${p};`, ExBdrRad = "") : ExBdrRad = p ? "ExBdrRad" + upperalldigit(p) : "", jfc = "", $ && "" !== $) switch ($) {
        case "center":
            jfc = "itms-jfcC";
            break;
        case "flex-start":
            jfc = "itms-jfcS";
            break;
        case "flex-end":
            jfc = "itms-jfcE";
            break;
        case "space-between":
            jfc = "itms-jfcSB";
            break;
        case "space-around":
            jfc = "itms-jfcSA";
            break;
        case "space-evenly":
            jfc = "itms-jfcSE";
            break;
        default:
            jfc = ""
    }
    if (alg = "", b && "" !== b) switch (b) {
        case "center":
            alg = "itms-algC";
            break;
        case "flex-start":
            alg = "itms-algS";
            break;
        case "flex-end":
            alg = "itms-algE";
            break;
        default:
            alg = ""
    }
    return f && f.indexOf("px") >= 0 ? (t += `top:${f};`, ext = "") : ext = f ? "ExT" + upperalldigit(f) : "", u && u.indexOf("px") >= 0 ? (t += `bottom:${u};`, exb = "") : exb = u ? "ExB" + upperalldigit(u) : "", g && g.indexOf("px") >= 0 ? (t += `left:${g};`, exl = "") : exl = g ? "ExL" + upperalldigit(g) : "", E && E.indexOf("px") >= 0 ? (t += `right:${E};`, exr = "") : exr = E ? "ExR" + upperalldigit(E) : "", m && m.indexOf("px") >= 0 ? (t += `padding:${m};`, ExPadA = "") : ExPadA = m ? "ExPadA" + upperalldigit(m) : "", y && y.indexOf("px") >= 0 ? (t += `padding-top:${y};`, ExPadT = "") : ExPadT = y ? "ExPadT" + upperalldigit(y) : "", v && v.indexOf("px") >= 0 ? (t += `padding-bottom:${v};`, ExPadB = "") : ExPadB = v ? "ExPadB" + upperalldigit(v) : "", _ && _.indexOf("px") >= 0 ? (t += `padding-left:${_};`, ExPadL = "") : ExPadL = _ ? "ExPadL" + upperalldigit(_) : "", h && h.indexOf("px") >= 0 ? (t += `padding-right:${h};`, ExPadR = "") : ExPadR = h ? "ExPadR" + upperalldigit(h) : "", B && "linearGradient" === B.type && (centerPosition = B.centerPosition ? B.centerPosition : "50%", B.centerColor ? t += `background: linear-gradient(${B.angle}, ${B.startColor} 0%, ${B.centerColor} ${centerPosition}, ${B.endColor} 100%);` : t += `background: linear-gradient(${B.angle}, ${B.startColor} 0%, ${B.endColor} 100%);`), `<div class="MdBx ${layout1} ${layout2} ${fl} ${exabs} ${exmgn} ${spc} ${ExBdr} ${ExBdrRad} ${jfc} ${alg} ${ext} ${exb} ${exl} ${exr} ${ExPadA} ${ExPadT} ${ExPadB} ${ExPadL} ${ExPadR}" style="${t}">\x3c!-- content --\x3e</div>`
}

function button_object(e) {
    style2 = "", style3 = "";
    let { flex: t, margin: r, position: i, height: x, style: n, color: a, gravity: l, adjustMode: o, offsetTop: d, offsetBottom: c, offsetStart: s, offsetEnd: p, action: $ } = e;
    if (fl = "", t > 3 ? style2 += `-webkit-box-flex:${t};flex-grow:${t};` : fl = t >= 0 ? `fl${t}` : "", exabs = "absolute" === i ? "ExAbs" : "", r && r.indexOf("px") >= 0 ? (style2 += `margin-top:${r};`, exmgn = "") : exmgn = r ? "ExMgnT" + upperalldigit(r) : "", x = x && "" !== x && "md" !== x ? "Ex" + upperalldigit(x) : "", grv = "bottom" === l || "center" === l ? "grv" + upper1digit(l) : "", ExBtn = "ExBtnL", n && "" !== n) switch (n) {
        case "link":
            ExBtnfc = "ExBtnL";
            break;
        case "primary":
            ExBtn = "ExBtn1";
            break;
        case "secondary":
            ExBtn = "ExBtn2";
            break;
        default:
            ExBtn = "ExBtnL"
    }
    return a && (style3 += `background-color:${a} !important;`), d && d.indexOf("px") >= 0 ? (style2 += `top:${d};`, ext = "") : ext = d ? "ExT" + upperalldigit(d) : "", c && c.indexOf("px") >= 0 ? (style2 += `bottom:${c};`, exb = "") : exb = c ? "ExB" + upperalldigit(c) : "", s && s.indexOf("px") >= 0 ? (style2 += `left:${s};`, exl = "") : exl = s ? "ExL" + upperalldigit(s) : "", p && p.indexOf("px") >= 0 ? (style2 += `right:${p};`, exr = "") : exr = p ? "ExR" + upperalldigit(p) : "", "uri" === ($ = $ || { type: "none" }).type ? `<div class="MdBtn ${ExBtn} ${x} ${fl} ${exabs} ${exmgn} ${grv} ${ext} ${exb} ${exl} ${exr}" style="${style2}" id="8d1efea2-4017-4c89-8931-98a5f4f141f2"><a href="${$.uri}" target="_blank" style="${style3}"><div>${$.label}</div></a></div>` : "message" === $.type ? `<div class="MdBtn ${ExBtn} ${x} ${fl} ${exabs} ${exmgn} ${grv} ${ext} ${exb} ${exl} ${exr}" style="${style2}" id="8d1efea2-4017-4c89-8931-98a5f4f141f2"><a onclick="alert('message: ${$.text}')" style="${style3}"><div>${$.label}</div></a></div>` : "postback" === $.type ? `<div class="MdBtn ${ExBtn} ${x} ${fl} ${exabs} ${exmgn} ${grv} ${ext} ${exb} ${exl} ${exr}" style="${style2}" id="8d1efea2-4017-4c89-8931-98a5f4f141f2"><a onclick="alert('postback data: ${$.data}')" style="${style3}"><div>${$.label}</div></a></div>` : `<div class="MdBtn ${ExBtn} ${x} ${fl} ${exabs} ${exmgn} ${grv} ${ext} ${exb} ${exl} ${exr}" style="${style2}" id="8d1efea2-4017-4c89-8931-98a5f4f141f2"><a style="${style3}"><div>${$.label}</div></a></div>`
}

function filler_object(e) {
    let t = "",
        { flex: r } = e;
    return fl = "", r > 3 ? t += `-webkit-box-flex:${r};flex-grow:${r};` : fl = r >= 0 ? `fl${r}` : "", `<div class="mdBxFiller ${fl}" style="${t}" ></div>`
}

function icon_object(e) {
    let t = "",
        { size: r, aspectRatio: i, url: x, position: n, margin: a, offsetTop: l, offsetBottom: o, offsetStart: d, offsetEnd: c } = e,
        s = `background-image:url('${x}');`;
    return (r = r && "" !== r ? r : "md").indexOf("px") >= 0 ? (t += `font-size:${r};`, r = "") : r = "Ex" + upperalldigit(r), i && "" !== i ? (ratio = ratio[0] / ratio[1], s += `width:${ratio}em;`) : s += "width:1em;", exabs = "absolute" === n ? "ExAbs" : "", a && a.indexOf("px") >= 0 ? (t += `margin-top:${a};`, exmgn = "") : exmgn = a ? "ExMgnT" + upperalldigit(a) : "", l && l.indexOf("px") >= 0 ? (t += `top:${l};`, ext = "") : ext = l ? "ExT" + upperalldigit(l) : "", o && o.indexOf("px") >= 0 ? (t += `bottom:${o};`, exb = "") : exb = o ? "ExB" + upperalldigit(o) : "", d && d.indexOf("px") >= 0 ? (t += `left:${d};`, exl = "") : exl = d ? "ExL" + upperalldigit(d) : "", c && c.indexOf("px") >= 0 ? (t += `right:${c};`, exr = "") : exr = c ? "ExR" + upperalldigit(c) : "", `<div class="MdIco fl0 ${r} ${exabs} ${exmgn} ${ext} ${exb} ${exl} ${exr}" style="${t}" ><div><span style="${s}"></span></div></div>`
}

function image_object(e) {
    let t = "",
        r = "",
        { aspectMode: i, size: x, aspectRatio: n, url: a, position: l, flex: o, margin: d, align: c, gravity: s, backgroundColor: p, offsetTop: $, offsetBottom: b, offsetStart: f, offsetEnd: u, action: g } = e,
        E = `background-image:url('${a}');`;
    return p && (E += `background-color:${p} !important;`), x = x && "" !== x ? x : "md", i = upperalldigit(i = i && "" !== i ? i : "fit"), x.indexOf("px") >= 0 ? (r += `width:${x};`, x = "") : x = "Ex" + upperalldigit(x), n && "" !== n ? (ratio = n.split(":"), ratio = 100 * ratio[1] / ratio[0]) : ratio = "100", fl = "", o > 3 ? t += `-webkit-box-flex:${o};flex-grow:${o};` : fl = o >= 0 ? `fl${o}` : "", exabs = "absolute" === l ? "ExAbs" : "", d && d.indexOf("px") >= 0 ? (t += `margin-top:${d};`, exmgn = "") : exmgn = d ? "ExMgnT" + upperalldigit(d) : "", alg = "start" === c || "end" === c ? "alg" + upper1digit(c) : "", grv = "bottom" === s || "center" === s ? "grv" + upper1digit(s) : "", $ && $.indexOf("px") >= 0 ? (t += `top:${$};`, ext = "") : ext = $ ? "ExT" + upperalldigit($) : "", b && b.indexOf("px") >= 0 ? (t += `bottom:${b};`, exb = "") : exb = b ? "ExB" + upperalldigit(b) : "", f && f.indexOf("px") >= 0 ? (t += `left:${f};`, exl = "") : exl = f ? "ExL" + upperalldigit(f) : "", u && u.indexOf("px") >= 0 ? (t += `right:${u};`, exr = "") : exr = u ? "ExR" + upperalldigit(u) : "", "uri" === (g = g || { type: "none" }).type ? `<div class="MdImg Ex${i} ${fl} ${x} ${exabs} ${exmgn} ${alg} ${grv} ${ext} ${exb} ${exl} ${exr}"  style="${t}">\n                  <div style="${r}">\n                     <a href="${g.uri}" target="_blank" style="padding-bottom:${ratio}%;">\n                        <span style="${E}"></span>\n                     </a>\n                  </div>\n               </div>` : "message" === g.type ? `<div class="MdImg Ex${i} ${fl} ${x} ${exabs} ${exmgn} ${alg} ${grv} ${ext} ${exb} ${exl} ${exr}"  style="${t}">\n                  <div style="${r}">\n                     <a onclick="alert('message: ${g.text}')" style="padding-bottom:${ratio}%;">\n                        <span style="${E}"></span>\n                     </a>\n                  </div>\n               </div>` : "postback" === g.type ? `<div class="MdImg Ex${i} ${fl} ${x} ${exabs} ${exmgn} ${alg} ${grv} ${ext} ${exb} ${exl} ${exr}"  style="${t}">\n                  <div style="${r}">\n                     <a onclick="alert('postback data: ${g.data}')" style="padding-bottom:${ratio}%;">\n                        <span style="${E}"></span>\n                     </a>\n                  </div>\n               </div>` : `<div class="MdImg Ex${i} ${fl} ${x} ${exabs} ${exmgn} ${alg} ${grv} ${ext} ${exb} ${exl} ${exr}"  style="${t}">\n                  <div style="${r}">\n                     <a style="padding-bottom:${ratio}%;">\n                        <span style="${E}"></span>\n                     </a>\n                  </div>\n               </div>`
}

function separator_object(e) {
    let t = "",
        { margin: r, color: i } = e;
    return r && r.indexOf("px") >= 0 ? (t += `margin-top:${r};`, exmgn = "") : exmgn = r ? "ExMgnT" + upperalldigit(r) : "", i && (t += `border-color:${i} !important;`), `<div class="fl0 MdSep ${exmgn}" style="${t}" ></div>`
}

function spacer_object(e) { let { size: t } = e; return `<div class="mdBxSpacer ${t=(t=t&&""!==t?t:"md").indexOf("px")>=0?"":"spc"+upperalldigit(t)} fl0" ></div>` }

function span_object(e) {
    let t = "",
        { text: r, size: i, color: x, weight: n, style: a, decoration: l } = e;
    return i && "" !== i ? i.indexOf("px") >= 0 ? (t += `font-size:${i};`, i = "") : i = "Ex" + upperalldigit(i) : i = "", x && "" !== x && (t += `color:${x};`), ExWB = "bold" === n ? "ExWB" : "", ExFntSty = "normal" === a ? "ExFntStyNml" : "italic" === a ? "ExFntStyIt" : "", ExTxtDec = "line-through" === l ? "ExTxtDecLt" : "underline" === l ? "ExTxtDecUl" : "none" === l ? "ExTxtDecNone" : "", `<span class="MdSpn ${ExWB} ${i} ${ExFntSty} ${ExTxtDec}" style="${t}" >${r}</span>`
}

function carousel_struc() { return '<div class="LySlider"><div class="lyInner">\x3c!-- inner --\x3e</div></div>' }

function carousel_struc_date() { return '<div class="LySlider" dir="rtl"><div class="lyInner showDate">\x3c!-- inner --\x3e</div></div>' }

function carousel_struc_text() { return '<div class="LySlider" dir="rtl"><div class="lyInner">\x3c!-- inner --\x3e</div></div>' }

function bubble_struc(e) { let { size: t, direction: r, action: i } = e; return r = r && "" != r ? r : "ltr", `<div class="lyItem Ly${t=upper2digit(t=t&&""!==t?t:"medium")}"><div class="T1 fx${r.toUpperCase()}" dir="${r}">\x3c!-- hero --\x3e\x3c!-- header --\x3e\x3c!-- body --\x3e\x3c!-- footer --\x3e</div></div>` }

function bubble_struc_date(e) { let { size: t, direction: r, action: i, custom: x } = e; return r = x, x = x, `<div class="lyItem Ly${t=upper2digit(t=t&&""!==t?t:"medium")} showDate"><div class="T1 fx${r.toUpperCase()} msg-box-${x}">\x3c!-- hero --\x3e\x3c!-- header --\x3e\x3c!-- body --\x3e\x3c!-- footer --\x3e</div></div>` }

function bubble_struc_text(e) { let { size: t, direction: r, action: i, custom: x } = e; return r = x, x = x, `<div class="lyItem Ly${t=upper2digit(t=t&&""!==t?t:"medium")}"><div class="T1 fx${r.toUpperCase()} msg-box-${x}" dir="${r}">\x3c!-- hero --\x3e\x3c!-- header --\x3e\x3c!-- body --\x3e\x3c!-- footer --\x3e</div></div>` }

function hero_struc() { return '<div class="t1Hero">\x3c!-- inner --\x3e</div>' }

function header_struc() { return '<div class="t1Header">\x3c!-- inner --\x3e</div>' }

function body_struc(e) { let { footer: t } = e; return `<div class="t1Body ${e?"ExHasFooter":""}">\x3c!-- inner --\x3e</div>` }

function footer_struc() { return '<div class="t1Footer">\x3c!-- inner --\x3e</div>' }

function text_object(e) {
    let t = "",
        { flex: r, margin: i, size: x, position: n, align: a, gravity: l, text: o, color: d, weight: c, style: s, decoration: p, wrap: $, maxLines: b, adjustMode: f, offsetTop: u, offsetBottom: g, offsetStart: E, offsetEnd: m } = e;
    return fl = "", r > 3 ? t += `-webkit-box-flex:${r};flex-grow:${r};` : fl = r >= 0 ? `fl${r}` : "", exabs = "absolute" === n ? "ExAbs" : "", i && i.indexOf("px") >= 0 ? (t += `margin-top:${i};`, exmgn = "") : exmgn = i ? "ExMgnL" + upperalldigit(i) : "", alg = "start" === a || "end" === a || "center" === a ? "ExAlg" + upper1digit(a) : "", grv = "bottom" === l || "center" === l ? "grv" + upper1digit(l) : "", (x = x && "" !== x ? x : "md").indexOf("px") >= 0 ? (t += `font-size:${x};`, x = "") : x = "Ex" + upperalldigit(x), d && "" !== d && (t += `color:${d};`), ExWB = "bold" === c ? "ExWB" : "", ExFntSty = "normal" === s ? "ExFntStyNml" : "italic" === s ? "ExFntStyIt" : "", ExTxtDec = "line-through" === p ? "ExTxtDecLt" : "underline" === p ? "ExTxtDecUl" : "none" === p ? "ExTxtDecNone" : "", ExWrap = !0 === $ ? "ExWrap" : "", u && u.indexOf("px") >= 0 ? (t += `top:${u};`, ext = "") : ext = u ? "ExT" + upperalldigit(u) : "", g && g.indexOf("px") >= 0 ? (t += `bottom:${g};`, exb = "") : exb = g ? "ExB" + upperalldigit(g) : "", E && E.indexOf("px") >= 0 ? (t += `left:${E};`, exl = "") : exl = E ? "ExL" + upperalldigit(E) : "", m && m.indexOf("px") >= 0 ? (t += `right:${m};`, exr = "") : exr = m ? "ExR" + upperalldigit(m) : "", o = o || "", `<div class="MdTxt ${fl} ${exabs} ${exmgn} ${alg} ${grv} ${x} ${ExWB} ${ExFntSty} ${ExTxtDec} ${ExWrap} ${ext} ${exb} ${exl} ${exr}" style="${t}"><p>${o}\x3c!-- content --\x3e</p></div>`
}

function upper1digit(e) { return e.charAt(0).toUpperCase() }

function upper2digit(e) { return e.charAt(0).toUpperCase() + e.substring(1, 2) }

function upperalldigit(e) { return e.charAt(0).toUpperCase() + e.slice(1) }